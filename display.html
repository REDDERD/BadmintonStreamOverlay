<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
<title>Badminton Overlay</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100vw;
    height: 100vh;
    background: transparent;
    font-family: Arial, sans-serif;
    overflow: hidden;
}

/* Vollbild-Zentrierung */
body {
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Hauptcontainer */
.scoreboard {
    width: 90vw;
    height: 35vh;
    background: rgba(0, 0, 0, 0.75);
    border-radius: 2vw;
    padding: 3vh 5vw;

    display: flex;
    justify-content: space-between;
    align-items: center;

    box-shadow: 0 1vh 4vh rgba(0,0,0,0.5);
    border: 0.2vw solid rgba(255,255,255,0.15);
}

/* Teams */
.team {
    width: 30%;
    text-align: center;
}

.team-name {
    font-size: 4vw;
    font-weight: bold;
    color: white;
    margin-bottom: 2vh;
    text-shadow: 0.3vw 0.3vw 0.8vw rgba(0,0,0,0.7);
}

.score {
    font-size: 12vw;
    font-weight: bold;
    line-height: 1;
    text-shadow: 0.5vw 0.5vw 1vw rgba(0,0,0,0.8);
}

.team1 .score {
    color: #4ade80;
}

.team2 .score {
    color: #f87171;
}

/* Mitte */
.middle-section {
    width: 20%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2vh;
}

.divider {
    font-size: 8vw;
    font-weight: bold;
    color: #9ca3af;
}

.sets-display {
    background: rgba(255,255,255,0.15);
    border: 0.2vw solid rgba(255,255,255,0.3);
    border-radius: 1.5vw;
    padding: 1vh 2vw;

    font-size: 4vw;
    font-weight: bold;
    color: white;
    backdrop-filter: blur(10px);
}

.sets-label {
    font-size: 2vw;
    letter-spacing: 0.3vw;
    text-transform: uppercase;
    color: #9ca3af;
}
</style>
</head>

<body>

<div class="scoreboard">
    <div class="team team1">
        <div class="team-name" id="team1-name">Team 1</div>
        <div class="score" id="team1-score">0</div>
    </div>

    <div class="middle-section">
        <div class="divider">:</div>
        <div class="sets-display">
            <span id="team1-sets">0</span> : <span id="team2-sets">0</span>
        </div>
        <div class="sets-label">SÃ¤tze</div>
    </div>

    <div class="team team2">
        <div class="team-name" id="team2-name">Team 2</div>
        <div class="score" id="team2-score">0</div>
    </div>
</div>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getDatabase, ref, onValue, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

const firebaseConfig = {
  apiKey: "AIzaSyBZnFI0Vt5J2CeFF8C6YNWNHK7pc-nxbVQ",
  authDomain: "badmintonstreamoverlay.firebaseapp.com",
  databaseURL: "https://badmintonstreamoverlay-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "badmintonstreamoverlay",
  storageBucket: "badmintonstreamoverlay.firebasestorage.app",
  messagingSenderId: "865072634738",
  appId: "1:865072634738:web:b1683b7b8d310f2221dbeb"
};

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const gameRef = ref(database, 'badminton-game');

const elements = {
    team1Name: document.getElementById('team1-name'),
    team1Score: document.getElementById('team1-score'),
    team1Sets: document.getElementById('team1-sets'),
    team2Name: document.getElementById('team2-name'),
    team2Score: document.getElementById('team2-score'),
    team2Sets: document.getElementById('team2-sets')
};

get(gameRef).then(snapshot => {
    if (snapshot.exists()) updateDisplay(snapshot.val());
});

onValue(gameRef, snapshot => {
    if (snapshot.exists()) updateDisplay(snapshot.val());
});

function updateDisplay(data) {
    elements.team1Name.textContent = data.names?.team1 || 'Team 1';
    elements.team1Score.textContent = data.scores?.team1 || 0;
    elements.team1Sets.textContent = data.sets?.team1 || 0;

    elements.team2Name.textContent = data.names?.team2 || 'Team 2';
    elements.team2Score.textContent = data.scores?.team2 || 0;
    elements.team2Sets.textContent = data.sets?.team2 || 0;
}
</script>

</body>
</html>
